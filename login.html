<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="log.css">
    <title>SuffixAI Login</title>
</head>

<body>

    <div class="container" id="container">
        <div class="form-container sign-up">
            <form id="signUpForm">
                <h1>Create Account</h1>
                <div class="social-icons">
                    <a href="#" class="icon"><i class="fa-brands fa-google-plus-g"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-github"></i></a>
                    <a href="#" class="icon"><i class="fa-brands fa-linkedin-in"></i></a>
                </div>
                <span>or use your email for registeration</span>
                <input type="text" placeholder="Name" id="signUpName">
                <input type="email" placeholder="Email" id="signUpEmail">
                <input type="password" placeholder="Password" id="signUpPassword">
                <button type="submit">Sign Up</button>
            </form>
        </div>
        <div class="form-container sign-in">
            <form id="signInForm">
                <h1>Sign In</h1>
                <!-- <div class="social-icons"> -->
                    <!-- <a href="#" class="icon"><i class="fa-brands fa-google-plus-g"></i></a> -->
                    <!-- <a href="#" class="icon"><i class="fa-brands fa-facebook-f"></i></a> -->
                    <!-- <a href="#" class="icon"><i class="fa-brands fa-github"></i></a> -->
                    <!-- <a href="#" class="icon"><i class="fa-brands fa-linkedin-in"></i></a> -->
                <!-- </div> -->
                <span> use your email & created password</span>
                <input type="email" placeholder="Email" id="signInEmail">
                <input type="password" placeholder="Password" id="signInPassword">
                <a href="#">→ Forget Your Password? ←</a>
                <button type="submit">Sign In</button>
                <div id="messageBox"></div>
            </form>
        </div>
        <div class="toggle-container">
            <div class="toggle">
                <div class="toggle-panel toggle-left">
                    <h1>Welcome Back!</h1>
                    <p>Enter your personal details to use all of site features</p>
                    <button class="hidden" id="login">Sign In</button>
                </div>
                <div class="toggle-panel toggle-right">
                    <h1>Hello, Friend!</h1>
                    <p>Register with your personal details to use all of site features</p>
                    <button class="hidden" id="register"><a href="registration.html" style="color: aliceblue;">Sign Up</a></button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Firebase SDKs -->
    <script type="module" src="https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js"></script>
    
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCKTlD0iuhjRc5vAq5Cw9yyJbzoNwyXbAw",
            authDomain: "sufix-registration.firebaseapp.com",
            projectId: "sufix-registration",
            storageBucket: "sufix-registration.firebasestorage.app",
            messagingSenderId: "979586808842",
            appId: "1:979586808842:web:381c48575a87f98c96f3f3",
            measurementId: "G-WSGSPZ8GT3"
        };

        let auth;

        // Initialize Firebase
        function initializeFirebase() {
            try {
                const app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                console.log("Firebase initialized successfully.");
            } catch (error) {
                console.error("Firebase initialization failed:", error);
                showMessage("Firebase setup failed. Check your configuration.", 'error');
            }
        }

        // DOM elements for sign-in
        const signInForm = document.getElementById('signInForm');
        const signInEmailInput = document.getElementById('signInEmail');
        const signInPasswordInput = document.getElementById('signInPassword');
        const messageBox = document.getElementById('messageBox');

        // Function to show messages
        function showMessage(message, type) {
            if (messageBox) {
                messageBox.style.display = 'block';
                messageBox.className = type;
                messageBox.innerText = message;
            }
        }

        // Handle sign-in form submission
        if (signInForm) {
            signInForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = signInEmailInput.value;
                const password = signInPasswordInput.value;
                
                showMessage('Signing in...', 'loading');

                try {
                    const userCredential = await signInWithEmailAndPassword(auth, email, password);
                    const user = userCredential.user;

                    showMessage("Login successful! Redirecting to home...", 'success');
                    console.log('User logged in:', user);

                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 2000);

                } catch (error) {
                    console.error("Login failed:", error);
                    let errorMessage = "Login failed. Please check your credentials.";
                    if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {
                        errorMessage = "Incorrect email or password.";
                    } else if (error.code === 'auth/invalid-email') {
                        errorMessage = "The email address is not valid.";
                    }
                    showMessage(errorMessage, 'error');
                }
            });
        }

        // Toggle logic (from your original code)
        const container = document.getElementById('container');
        const registerBtn = document.getElementById('register');
        const loginBtn = document.getElementById('login');

        if (registerBtn) {
            registerBtn.addEventListener('click', () => {
                container.classList.add("active");
            });
        }

        if (loginBtn) {
            loginBtn.addEventListener('click', () => {
                container.classList.remove("active");
            });
        }

        // Initialize Firebase when the script loads
        initializeFirebase();
    </script>
</body>

</html>
